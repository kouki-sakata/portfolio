<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/head_fragment :: head_content(pageTitle='TIME MANAGER / お知らせ情報管理')}"></head>
<!-- Flatpickr CSS -->
<link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
      rel="stylesheet">
<body>
<!-- 共通ヘッダー -->
<header th:replace="~{common/header}"></header>

<!-- メインコンテンツ -->
<main class="main_content">
    <!-- ナビ選択用の設定値 -->
    <input id="target_nav" type="hidden" value="news-manage"/>
    <!-- 共通ナビ -->
    <nav th:replace="~{common/navigation}"></nav>
    <!-- コンテンツ -->
    <section>
        <p class="mb-4 weight_600">
            お知らせ情報　新規登録・変更
        </p>
        <p class="mb-4">
            お知らせ情報を新規登録したい場合は、以下を入力して登録ボタンを押してください
        </p>
        <form id="regist_form" method="post" th:action="@{regist}">
            <input id="input_id" name="id" type="hidden">
            <div class="row g-3">
                <div class="col-12 col-md-2">
                    <label for="input_date">日付</label>
                    <input class="form-control" id="input_date" name="newsDate"
                           placeholder="YYYY-MM-DD"
                           type="text">
                </div>
                <div class="col-12 col-md-10">
                    <label for="input_content">内容</label>
                    <input class="form-control" id="input_content"
                           maxlength="75"
                           name="content" type="text">
                    <!-- 文字数75文字カウント -->
                    <p class="space">現在<span id="content_count">0</span>文字（75文字以内）
                    </p>
                </div>
            </div>
            <div class="d-flex justify-content-end gap-2 mt-3">
                <button class="btn bg_blue_info shadow height_3" id="regist"
                        style="width: 150px;"
                        type='button'>登録
                </button>
            </div>
        </form>
        <p class="mt-4 text-danger" id="regist_message_area"
           th:text="${registResult}"></p>
        <p class="mb-4 weight_600">
            お知らせ一覧
        </p>
        <p class="mb-4">
            お知らせ情報を編集したい場合は、対象行の編集ボタンをクリックして「お知らせ情報　新規登録・変更」にて編集して登録ボタンを押してください
        </p>
        <p class="mb-4">
            お知らせ情報を削除したい場合は、削除チェックボックスをONにして削除ボタンを押してください（複数選択可）
        </p>
        <p class="mb-4">
            お知らせ情報を公開したい場合は、公開チェックボックスをONにして公開ボタンを押してください（最大4件）
        </p>
        <form id="delete_release_form" method="post" th:action="@{delete}">
            <div class="bg_white stamp_box margin_tp_2 table-responsive">
                <div class="loading-overlay" id="loading-overlay">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
                <table class="table table-striped margin_tp_1" id="news-table">
                    <thead>
                    <tr>
                        <th><input
                                class="selection-days-checkbox-1 form-check-input checkbox-large"
                                id="all"
                                type="checkbox"></th>
                        <th>日付</th>
                        <th>内容</th>
                        <th>公開</th>
                        <th>編集</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- DataTables will populate this section dynamically -->
                    </tbody>
                </table>
            </div>
            <div class="button-row text_white d-flex gap-3 mt-4 mb-0">
                <button class="btn bg_red_info shadow height_3 btn-width-150"
                        id="delete"
                        type="button">削除
                </button>
                <button class="btn bg_blue_info shadow height_3 ms-auto btn-width-150"
                        id="release"
                        type="button">公開
                </button>
            </div>
        </form>
        <p class="mt-4 text-danger" id="delete_release_message_area"
           th:text="${delRlsResult}"></p>
    </section>
</main>
<!-- 共通フッター -->
<footer th:replace="~{common/footer}"></footer>
<div th:replace="~{common/body_end_fragment :: body_end_content}"></div>
<!-- news_manage.js -->
<script th:src="@{/js/news_manage.js}"></script>
<!-- Flatpickr JS -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ja.js"></script>
<script>
    flatpickr("#input_date", {
        locale: "ja",
        dateFormat: "Y-m-d",
    });
</script>
</body>
</html>
