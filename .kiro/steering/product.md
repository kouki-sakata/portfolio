# TeamDevelop Bravo 製品概要

## 製品概要

TeamDevelop Bravoは、モバイルフレンドリーなReact + Spring Boot
SPAベースの勤怠管理システムです。既存のThymeleaf実装を置き換え、PostgreSQLへのマイグレーションと合わせてフロントエンド/バックエンドを再構築した、モダンな勤怠管理ソリューションです。

## コア機能

### 認証システム

- **セッションベース認証**: Spring Securityによる安全なログイン/ログアウト
- **CSRF保護**: Cookie + `X-XSRF-TOKEN`ヘッダーによる保護
- **ロールベースアクセス制御**: 管理者と一般社員の権限管理

### 勤怠管理機能

- **Web打刻**: ブラウザベースの出退勤打刻機能
- **打刻履歴管理**: 従業員の勤怠記録の表示・編集・削除
- **月次集計**: 勤務時間の自動計算と集計
- **CSV出力**: 勤怠記録のエクスポート機能

### 従業員管理

- **従業員登録**: 新規従業員の追加と情報管理
- **従業員一覧**: TanStack Tableを使用した高度な検索・ソート・ページネーション機能
- **権限管理**: 管理者による従業員情報の編集・削除
- **高性能データテーブル**: 大量データの効率的な表示とフィルタリング

### ダッシュボード

- **ホーム画面**: お知らせ表示と打刻機能の統合
- **リアルタイムステータス**: 現在の勤務状態の表示
- **モバイル対応**: レスポンシブデザインによる全デバイス対応
- **高度なテーブル機能**: TanStack Tableによる高速なデータグリッド表示

### お知らせ管理

- **お知らせ登録**: 管理者によるお知らせの作成と配信
- **公開管理**: お知らせの公開・非公開状態の制御
- **削除機能**: 不要なお知らせの削除処理
- **一覧表示**: DataTablesによる効率的なお知らせ管理

### ログ管理

- **ログ履歴照会**: システムログの検索と表示
- **詳細検索**: 日付範囲や条件によるログフィルタリング
- **監査証跡**: 操作履歴の完全な記録と追跡
- **DataTables統合**: 大量のログデータの効率的な表示

## ターゲットユースケース

### 主要ユーザー

- **中小企業**: 効率的な勤怠管理が必要な組織
- **リモートワーク対応企業**: 場所を問わない打刻が可能
- **多拠点企業**: 複数の拠点を持つ企業の統合管理

### 具体的なシナリオ

1. **日常の出退勤管理**: 従業員の日々の出勤・退勤時刻の記録
2. **勤務時間の追跡**: 月次・年次の労働時間集計
3. **労務管理**: 労働基準法に準拠した勤怠データ管理
4. **給与計算連携**: 勤怠データを基にした給与計算の基礎データ提供

## 主要な価値提案

### 技術的優位性

- **モダンなSPA**: React 19 + Spring Boot 3.4による高速で快適なUX
- **リアルタイムAPI**: RESTful APIによる即座のデータ反映
- **セキュアな設計**: Spring Securityによる堅牢な認証・認可
- **スケーラビリティ**: PostgreSQL 16 + MyBatisによる効率的なデータ管理
- **開発効率化**: OpenAPI仕様によるフロント/バックエンドの自動型同期
- **型安全性**: TypeScript 5 + Zodによるランタイム/コンパイルタイムの二重検証
  - satisfies演算子による型制約の保証
  - Branded Typesによる名義的型付け（ID誤用防止）
  - Template Literal Typesによる型安全なAPIパス
  - 型述語関数による実行時型チェック
- **UIコンポーネント**: shadcn/ui + Tailwind CSS 4によるモダンなデザインシステム
- **SOLID原則準拠**: Phase 2リファクタリングによる保守性・拡張性の向上
  - サービス層の責任分離（従業員管理を4つの専門サービスに分割）
  - ファサードパターンによる複雑性の隠蔽
  - テストカバレッジ向上（85%以上）

### ビジネス価値

- **業務効率化**: 手動の勤怠管理からの脱却
- **コンプライアンス**: 労働時間の正確な記録と管理
- **コスト削減**: 勤怠管理の自動化による人的リソースの削減
- **データ活用**: 勤怠データの分析による業務改善

## システム要件

### 推奨環境

- **ブラウザ**: Chrome, Firefox, Safari, Edge（最新版）
- **画面解像度**: 1024×768以上（モバイル対応）
- **ネットワーク**: インターネット接続必須

### デプロイメント

- **本番環境**: AWS Elastic Beanstalk
- **データベース**: PostgreSQL 16
- **コンテナ**: Docker対応

## 成功指標

### パフォーマンス目標

- **ページ読み込み**: 2秒以内
- **API応答時間**: 200ms以内（95パーセンタイル）
- **同時接続**: 1000ユーザー以上のサポート
- **稼働率**: 99.9%以上

### ユーザビリティ

- **モバイル対応**: 全機能のモバイル最適化
- **直感的UI**: 最小限のトレーニングで操作可能
- **多言語対応**: 日本語環境に最適化

## 実装状況

### 完了済み機能

- ✅ SPA化（React + TypeScript）
- ✅ 認証システム（Spring Security）
- ✅ 従業員管理API
- ✅ 打刻機能API
- ✅ PostgreSQL移行
- ✅ Docker Compose環境構築
- ✅ CI/CDパイプライン（GitHub Actions）

### 開発中/計画中

- ✅ OpenAPI TypeScript型生成パイプライン（完了）
- ✅ shadcn/uiコンポーネントライブラリ導入（完了）
- ✅ Tailwind CSS 4への移行（完了）
- ✅ SOLID原則に基づくフロントエンドリファクタリング（完了）
- ✅ TypeScript型安全性の向上（完了）
- ✅ ESLint/PrettierからBiomeへの完全移行（完了 - 2025-09-29）
  - 統合コード品質管理ツール導入
  - リンティング・フォーマット処理速度10倍向上
  - 設定ファイル一元化による保守性向上
- ✅ React Router 7への移行（完了）
- ✅ 認証コンテキストの実装（完了）
- ✅ APIクライアント層の構築（完了 - 2025-09-29）
  - 各機能モジュールに専用APIクライアント実装
  - React Queryとの統合による効率的なデータフェッチング
  - 型安全なAPI呼び出しパターンの確立
- ✅ SignInPageのshadcn/ui化（完了 - 2025-09-29）
  - React Hook Form + Zodによるフォームバリデーション
  - shadcn/uiのFormコンポーネント導入
  - アクセシビリティとUX改善
- ✅ React Query認証フックの実装（完了 - 2025-09-29）
  - セッション管理用カスタムフック（useSession、useLogin、useLogout、useAuthContext）
  - QueryClient設定の最適化（staleTime、gcTime、retry戦略）
  - 認証状態の統一管理
- ✅ HomePageダッシュボードのshadcn/ui化（完了 - 2025-09-29）
  - StampCard/NewsCardコンポーネントの実装
  - Tailwind CSS v4によるレスポンシブデザイン
  - React Query統合によるリアルタイムデータ更新
  - PageLoaderによる読み込み状態の改善
- ✅ グローバルエラーハンドリングシステム（完了 - 2025-09-30）
  - カスタムエラークラス階層の実装（NetworkError、ValidationError、AuthenticationError等）
  - ErrorBoundaryコンポーネントによるReactエラー捕捉
  - GlobalErrorHandlerによる一元的エラー処理
  - エラー分類と自動リトライ戦略の実装
  - 包括的なテストカバレッジ（単体テスト・統合テスト）
- ✅ TanStack Table統合（完了 - 2025-09-30）
  - DataTableコンポーネント実装（v8.21.3）
  - ソート、フィルタリング、ページネーション機能
  - Headless UIパターンによる柔軟なカスタマイズ性
  - 大規模データセットの効率的なレンダリング
- ✅ 従業員管理機能のモダン化（完了 - 2025-09-30）
  - ZodスキーマによるAPI型安全性の強化
  - TanStack Tableを使用した高性能データグリッド
  - React Query統合による効率的なデータ管理
  - ZodEffects型の適切な処理と型推論の改善
- ✅ 打刻履歴表示機能の拡張（完了 - 2025-09-30）
  - カレンダービュー実装（月間打刻状況の視覚化）
  - 統計カード表示（月次集計情報）
  - 打刻履歴の編集・削除ダイアログ
  - TypeScript型安全性の完全対応
  - CalendarView.tsxの型エラー修正完了
- ✅ 打刻履歴のCSVエクスポート機能（完了 - 2025-09-30）
  - 月次データのCSV形式ダウンロード
  - 日本語エンコーディング対応（Shift-JIS with BOM）
  - データ項目: 日付、曜日、出勤時刻、退勤時刻、休憩時間、労働時間、備考
  - React Hook実装によるファイル生成とダウンロード処理
- ✅ ローディング状態とスケルトンUIの実装（完了 - 2025-09-30）
  - LoadingSpinnerコンポーネント（TailwindCSS v4対応）
  - SkeletonVariantsコンポーネント（Card/Table/Form/Text）実装
  - React 19 SuspenseWrapperで統合管理を実現
  - React Queryにsuspenseモード設定を追加
  - React.lazyによるコード分割でバンドルサイズ最適化
- ✅ Phase 2 SOLID原則適用とテストカバレッジ改善（完了 - 2025-10-01）
  - EmployeeServiceを4つの専門サービスに分割
    - EmployeeQueryService: 従業員情報の照会専用
    - EmployeeCommandService: 従業員情報の更新専用
    - EmployeeDataTableService: DataTables統合処理専用
    - EmployeeCacheService: キャッシュ管理専用
  - AuthSessionServiceの実装（セッション管理の分離）
  - 88+の統合テストケース追加（314テスト、309+成功）
  - テストカバレッジ大幅向上
    - EmployeeServiceTest: 35/100 → 85/100 (+143%)
    - TimestampConverter: 54/100 → 90/100 (+67%)
  - TimestampConverterのゼロパディング不足修正
  - ファサードパターン完全実装による複雑性の隠蔽
- ✅ Form Validation統一とUX改善（完了 - 2025-10-01）
  - TypeScript strict mode型エラー修正の完全対応
  - Formコンポーネントのアクセシビリティ強化
    - ARIA属性の適切な実装
    - スクリーンリーダー対応の改善
    - フォーカス管理の最適化
  - エラーメッセージの統一
    - 一貫性のあるエラー表示パターン
    - ユーザーフレンドリーなメッセージング
    - React Hook Form + Zodの統合改善
- ✅ TypeScript v5型定義リファクタリング（完了 - 2025-10-02）
  - satisfies演算子による型制約と推論の両立
  - queryOptions/mutationOptionsパターン導入
  - Branded Typesによる名義的型付け（エンティティID・トークン）
  - Template Literal Typesによる型安全なAPI定義
  - 型述語（Type Predicates）関数の実装
  - React.FCから関数宣言への移行
  - グローバル型定義ファイルの作成
- ✅ React Query Route Loader統合（完了 - 2025-10-03）
  - ルート遷移時のデータプリフェッチング最適化
  - QueryClientのprefetchQuery統合
  - ルートローダーによる事前データ取得
  - ナビゲーション体験の高速化
  - テストカバレッジの強化（91件の新規テスト追加）
- ✅ お知らせ管理・ログ管理APIクライアント実装（完了 - 2025-10-04）
  - お知らせ管理API（登録・公開管理・削除）のクライアント実装
  - ログ管理API（履歴照会・検索）のクライアント実装
  - フロントエンドからのAPI呼び出し対応
  - 型安全なAPI通信の確立
- ✅ API統合テスト with MSW（完了 - 2025-10-04）
  - MSW (Mock Service Worker) v2.8.0の導入
  - APIモックによるリアルな統合テスト実装
  - 認証フロー、エラーハンドリング、リトライメカニズムのテストカバレッジ
  - テストセットアップの改善（Vitest + MSW自動化）
  - 5つの主要テストシナリオ実装完了
- 🔄 Playwright E2Eテスト拡充
- 📋 管理者向け分析ダッシュボード
- 📋 勤怠承認ワークフロー
- 📋 外部システム連携API

## テスト環境

### テストアカウント

- **管理者**: `admin.user@example.com` / `AdminPass123!`
- **一般社員**: `test.user@example.com` / `TestPass123!`
- **本番環境テスト**: `test@gmail.com` / `testtest`

### デモ環境

- **URL
  **: http://my-spring-app-env.eba-kmwuwpfp.ap-northeast-1.elasticbeanstalk.com/
- ※本番環境は移行作業中。最新のUIはローカルまたはステージングで確認
