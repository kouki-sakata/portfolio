## Analyze Performance

## Implementation Notes

- **Development Approach**:
    - Utilize **context7** for all development activities.
    - Consistently apply software development **best practices**.
- **Coding Standards (TypeScript)**:
    - **Type Safety**: Strictly enforce TypeScript's type consistency. All code
      must be fully type-safe.
    - **Biome + ultracite Rules**: Adhere to the ultracite preset for Biome,
      which provides:
        - **Strict Type Safety**: Enforces TypeScript's strictest type
          checking (no `any`, strict null checks, exhaustive type handling)
        - **AI-Ready Code Quality**: Optimized for AI-generated code with
          comprehensive linting and formatting rules
        - **Performance**: Rust-powered Biome engine for instant feedback during
          development

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®è¦³ç‚¹ã‹ã‚‰åˆ†æã—ã€æ”¹å–„ã«ã‚ˆã‚‹ä½“æ„Ÿé€Ÿåº¦å‘ä¸Šã‚’å®šé‡åŒ–ã—ã¾ã™ã€‚Core
Web Vitals ã«åŸºã¥ã UX ã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã—ã€å„ªå…ˆé †ä½ä»˜ã‘ã•ã‚ŒãŸæœ€é©åŒ–æˆ¦ç•¥ã‚’ææ¡ˆã—ã¾ã™ã€‚

### UX ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚¹ã‚³ã‚¢

```text
ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚¹ã‚³ã‚¢: B+ (78/100)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â±ï¸ Core Web Vitals
â”œâ”€ LCP (èª­ã¿è¾¼ã¿): 2.3 ç§’ [Good] ç›®æ¨™<2.5 ç§’ âœ…
â”œâ”€ FID (æ“ä½œåå¿œ): 95ms [Good] ç›®æ¨™<100ms âœ…
â”œâ”€ CLS (è¦–è¦šå®‰å®š): 0.08 [Good] ç›®æ¨™<0.1 âœ…
â”œâ”€ FCP (åˆå›æç”»): 1.8 ç§’ [Good] ç›®æ¨™<1.8 ç§’ âœ…
â”œâ”€ TTFB (ã‚µãƒ¼ãƒãƒ¼): 450ms [Needs Work] ç›®æ¨™<200ms âš ï¸
â””â”€ TTI (æ“ä½œå¯èƒ½): 3.5 ç§’ [Needs Work] ç›®æ¨™<3.8 ç§’ âš ï¸

ğŸ“Š ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“æ„Ÿé€Ÿåº¦
â”œâ”€ åˆå›è¡¨ç¤ºä½“æ„Ÿ: 2.3 ç§’ [æ¥­ç•Œå¹³å‡: 3.0 ç§’]
â”œâ”€ ãƒšãƒ¼ã‚¸é·ç§»: 1.1 ç§’ [æ¥­ç•Œå¹³å‡: 1.5 ç§’]
â”œâ”€ æ¤œç´¢çµæœè¡¨ç¤º: 0.8 ç§’ [æ¥­ç•Œå¹³å‡: 1.2 ç§’]
â”œâ”€ ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡: 1.5 ç§’ [æ¥­ç•Œå¹³å‡: 2.0 ç§’]
â””â”€ ç”»åƒèª­ã¿è¾¼ã¿: é…å»¶ãƒ­ãƒ¼ãƒ‰å®Ÿè£…æ¸ˆã¿ âœ…

ğŸ˜Š ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦äºˆæ¸¬
â”œâ”€ é›¢è„±ç‡äºˆæ¸¬: 12% (æ¥­ç•Œå¹³å‡: 20%)
â”œâ”€ å®Œäº†ç‡äºˆæ¸¬: 78% (ç›®æ¨™: 85%)
â”œâ”€ æ¨å¥¨ NPS: +24 (æ¥­ç•Œå¹³å‡: +15)
â””â”€ ãƒªãƒ”ãƒ¼ãƒˆç‡: 65% (ç›®æ¨™: 70%)

ğŸ“Š ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã¸ã®å½±éŸ¿
â”œâ”€ è¡¨ç¤ºé€Ÿåº¦ 0.5 ç§’çŸ­ç¸® â†’ é›¢è„±ç‡ -7%
â”œâ”€ é›¢è„±ç‡ 5% å‰Šæ¸› â†’ ã‚»ãƒƒã‚·ãƒ§ãƒ³é•· +15%
â”œâ”€ æ¤œç´¢æ”¹å–„ â†’ æ»åœ¨æ™‚é–“ +15%
â””â”€ ç·åˆçš„ãª UX æ”¹å–„åº¦: +25%

ğŸ¯ æ”¹å–„ã«ã‚ˆã‚‹æœŸå¾…åŠ¹æœ (å„ªå…ˆé †ä½é †)
â”œâ”€ [P0] TTFB æ”¹å–„ (CDN å°å…¥) â†’ LCP -0.3 ç§’ = ä½“æ„Ÿé€Ÿåº¦ +15%
â”œâ”€ [P1] JS ãƒãƒ³ãƒ‰ãƒ«æœ€é©åŒ– â†’ TTI -0.8 ç§’ = æ“ä½œå¯èƒ½æ™‚é–“ -20%
â”œâ”€ [P2] ç”»åƒæœ€é©åŒ– (WebP) â†’ è»¢é€é‡ -40% = ãƒ­ãƒ¼ãƒ‰æ™‚é–“ -25%
â””â”€ [P3] ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ â†’ ãƒªãƒ”ãƒ¼ãƒˆè¨ªå•æ™‚ 50% é«˜é€ŸåŒ–
```

### ä½¿ã„æ–¹

```bash
# UX ã‚¹ã‚³ã‚¢ã®åŒ…æ‹¬çš„åˆ†æ
find . -name "*.js" -o -name "*.ts" | xargs wc -l | sort -rn | head -10
ã€ŒUX ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã—ã€Core Web Vitals ã‚’è©•ä¾¡ã—ã¦ã€

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã®æ¤œå‡º
grep -r "for.*await\|forEach.*await" . --include="*.js"
ã€ŒéåŒæœŸå‡¦ç†ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‚’æ¤œå‡ºã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“æ„Ÿã¸ã®å½±éŸ¿ã‚’åˆ†æã—ã¦ã€

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã¸ã®å½±éŸ¿åˆ†æ
grep -r "addEventListener\|setInterval" . --include="*.js" | grep -v "removeEventListener\|clearInterval"
ã€Œãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡ŒãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã«ä¸ãˆã‚‹å½±éŸ¿ã‚’åˆ†æã—ã¦ã€
```

### åŸºæœ¬ä¾‹

```bash
# ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã¨ãƒ­ãƒ¼ãƒ‰æ™‚é–“
npm ls --depth=0 && find ./public -name "*.js" -o -name "*.css" | xargs ls -lh
"ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã¨ã‚¢ã‚»ãƒƒãƒˆæœ€é©åŒ–ã®æ”¹å–„ç‚¹ã‚’ç‰¹å®šã—ã¦"

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
grep -r "SELECT\|findAll\|query" . --include="*.js" | head -20
"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªã®æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆã‚’åˆ†æã—ã¦"

# ä¾å­˜é–¢ä¿‚ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å½±éŸ¿
npm outdated && npm audit
"å¤ã„ä¾å­˜é–¢ä¿‚ãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ä¸ãˆã‚‹å½±éŸ¿ã‚’è©•ä¾¡ã—ã¦"
```

### åˆ†æè¦³ç‚¹

#### 1. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ™ãƒ«ã®å•é¡Œ

- **O(nÂ²) ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **: éåŠ¹ç‡ãªé…åˆ—æ“ä½œã®æ¤œå‡º
- **åŒæœŸ I/O**: ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°å‡¦ç†ã®ç‰¹å®š
- **é‡è¤‡å‡¦ç†**: ä¸è¦ãªè¨ˆç®—ã‚„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å‰Šé™¤
- **ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯**: ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚„ã‚¿ã‚¤ãƒãƒ¼ã®ç®¡ç†

#### 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¬ãƒ™ãƒ«ã®å•é¡Œ

- **N+1 ã‚¯ã‚¨ãƒª**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¸è¶³**: ç¹°ã‚Šè¿”ã—è¨ˆç®—ã‚„ API å‘¼ã³å‡ºã—
- **ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º**: ä¸è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ã‚³ãƒ¼ãƒ‰åˆ†å‰²
- **ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†**: æ¥ç¶šãƒ—ãƒ¼ãƒ«ã‚„ã‚¹ãƒ¬ãƒƒãƒ‰ä½¿ç”¨é‡

#### 3. æŠ€è¡“çš„è² å‚µã«ã‚ˆã‚‹å½±éŸ¿

- **ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰**: å¤ã„å®Ÿè£…ã«ã‚ˆã‚‹æ€§èƒ½åŠ£åŒ–
- **è¨­è¨ˆã®å•é¡Œ**: è²¬ä»»åˆ†æ•£ä¸è¶³ã«ã‚ˆã‚‹çµåˆåº¦ã®é«˜ã•
- **ãƒ†ã‚¹ãƒˆä¸è¶³**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å›å¸°ã®æ¤œå‡ºæ¼ã‚Œ
- **ç›£è¦–ä¸è¶³**: å•é¡Œã®æ—©æœŸç™ºè¦‹ä½“åˆ¶

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ ROI ãƒãƒˆãƒªã‚¯ã‚¹

```text
æ”¹å–„ ROI = (æ™‚é–“å‰Šæ¸›åŠ¹æœ + å“è³ªå‘ä¸Š) Ã· å®Ÿè£…å·¥æ•°
```

| å„ªå…ˆåº¦             | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Š | å®Ÿè£…é›£æ˜“åº¦ | æ™‚é–“å‰Šæ¸›åŠ¹æœ | å…·ä½“ä¾‹    | å·¥æ•°  | åŠ¹æœ       |
|-----------------|----------|-------|--------|--------|-----|----------|
| **[P0] å³å®Ÿè£…ã™ã¹ã** | é«˜        | ä½     | > 50%  | CDN å°å…¥ | 8h  | å¿œç­” -60%  |
| **[P1] æ—©æœŸå®Ÿè£…æ¨å¥¨** | é«˜        | ä¸­     | 20-50% | ç”»åƒæœ€é©åŒ–  | 16h | ãƒ­ãƒ¼ãƒ‰ -30% |
| **[P2] è¨ˆç”»çš„å®Ÿè£…**  | ä½        | é«˜     | 10-20% | ã‚³ãƒ¼ãƒ‰åˆ†å‰²  | 40h | åˆå› -15%  |
| **[P3] ä¿ç•™/æ§˜å­è¦‹** | ä½        | ä½     | < 10%  | å¾®ç´°ãªæœ€é©åŒ– | 20h | éƒ¨åˆ† -5%   |

#### å„ªå…ˆåº¦åˆ¤å®šåŸºæº–

- **P0(å³å®Ÿè£…)**: UX å‘ä¸Šã€Œé«˜ã€Ã— é›£æ˜“åº¦ã€Œä½ã€= ROI æœ€å¤§
- **P1(æ—©æœŸå®Ÿè£…)**: UX å‘ä¸Šã€Œé«˜ã€Ã— é›£æ˜“åº¦ã€Œä¸­ã€= ROI é«˜
- **P2(è¨ˆç”»çš„)**: UX å‘ä¸Šã€Œä½ã€Ã— é›£æ˜“åº¦ã€Œé«˜ã€= ROI ä¸­
- **P3(ä¿ç•™)**: UX å‘ä¸Šã€Œä½ã€Ã— é›£æ˜“åº¦ã€Œä½ã€= ROI ä½

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ã¨ UX æ”¹å–„ç›¸é–¢

| æŒ‡æ¨™              | æ”¹å–„å¹…    | ä½“æ„Ÿé€Ÿåº¦å‘ä¸Š | ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦   | å®Ÿè£…å·¥æ•° |
|-----------------|--------|--------|-----------|------|
| **LCP (èª­ã¿è¾¼ã¿)**  | -0.5 ç§’ | +30%   | é›¢è„±ç‡ -7%   | 16h  |
| **FID (æ“ä½œåå¿œ)**  | -50ms  | +15%   | ã‚¹ãƒˆãƒ¬ã‚¹ -20% | 8h   |
| **CLS (è¦–è¦šå®‰å®š)**  | -0.05  | +10%   | èª¤æ“ä½œ -50%  | 4h   |
| **TTFB (ã‚µãƒ¼ãƒãƒ¼)** | -200ms | +25%   | ä½“æ„Ÿé€Ÿåº¦ +40% | 24h  |
| **TTI (æ“ä½œå¯èƒ½)**  | -1.0 ç§’ | +35%   | å®Œäº†ç‡ +15%  | 32h  |
| **ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º**     | -30%   | +20%   | åˆå›è¨ªå• +25% | 16h  |

### æ¸¬å®šã¨ãƒ„ãƒ¼ãƒ«

#### Node.js / JavaScript

```bash
# ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°
node --prof app.js
clinic doctor -- node app.js

# ãƒãƒ³ãƒ‰ãƒ«åˆ†æ
npx webpack-bundle-analyzer
lighthouse --chrome-flags="--headless"
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

```sql
-- ã‚¯ã‚¨ãƒªåˆ†æ
EXPLAIN ANALYZE SELECT ...
SHOW SLOW LOG;
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```bash
# React ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
grep -r "useMemo\|useCallback" . --include="*.jsx"

# ãƒªã‚½ãƒ¼ã‚¹åˆ†æ
find ./src -name "*.png" -o -name "*.jpg" | xargs ls -lh
```

### ç¶™ç¶šçš„æ”¹å–„

- **å®šæœŸç›£æŸ»**: é€±æ¬¡ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- **ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†**: ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã€ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®è¿½è·¡
- **ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š**: é–¾å€¤è¶…éæ™‚ã®è‡ªå‹•é€šçŸ¥
- **ãƒãƒ¼ãƒ å…±æœ‰**: æ”¹å–„äº‹ä¾‹ã¨ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ–‡æ›¸åŒ–
