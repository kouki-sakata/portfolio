# newsãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µå®Ÿè£…ãƒ—ãƒ©ãƒ³: title + category

## ğŸ“‹ ç¢ºå®šä»•æ§˜

### è¿½åŠ ã‚«ãƒ©ãƒ 
- **title**: `VARCHAR(200) NOT NULL` - ãŠçŸ¥ã‚‰ã›ã®ã‚¿ã‚¤ãƒˆãƒ«
- **category**: `VARCHAR(20) NOT NULL DEFAULT 'ä¸€èˆ¬'` - ã‚«ãƒ†ã‚´ãƒªï¼ˆé‡è¦/ã‚·ã‚¹ãƒ†ãƒ /ä¸€èˆ¬ï¼‰

### ã‚«ãƒ†ã‚´ãƒªå®šç¾©ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³A: ã‚·ãƒ³ãƒ—ãƒ«æ§‹æˆï¼‰
```
'é‡è¦'    ğŸ”´ å‹¤æ€ ç· ã‚æ—¥ã€ç”³è«‹æœŸé™ã€ç·Šæ€¥é€šçŸ¥
'ã‚·ã‚¹ãƒ†ãƒ ' ğŸ”µ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã€éšœå®³æƒ…å ±ã€ã‚·ã‚¹ãƒ†ãƒ æ›´æ–°
'ä¸€èˆ¬'    âšª æ©Ÿèƒ½è¿½åŠ ã€ãŠçŸ¥ã‚‰ã›ã€ãƒ’ãƒ³ãƒˆ
```

### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ–¹å¼
- **æˆ¦ç•¥**: ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ç›´æ¥ç·¨é›† + DBå†æ§‹ç¯‰
- **ã‚³ãƒãƒ³ãƒ‰**: DBå‰Šé™¤ â†’ 01_schema.sql, 02_data.sql ã‚’æŠ•å…¥
- **å¯¾è±¡ç’°å¢ƒ**: é–‹ç™ºç’°å¢ƒã®ã¿ï¼ˆæœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãªã—æƒ³å®šï¼‰

---

## ğŸ¯ å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆå…¨4ãƒ•ã‚§ãƒ¼ã‚ºï¼‰

### Phase 1: Database Schema Update (30åˆ†)

#### 1.1 `src/main/resources/01_schema.sql` æ›´æ–°
```sql
CREATE TABLE news (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    news_date DATE NOT NULL,
    title VARCHAR(200) NOT NULL,                    -- ğŸ†• è¿½åŠ 
    content TEXT NOT NULL CHECK (length(content) BETWEEN 1 AND 1000),
    category VARCHAR(20) NOT NULL DEFAULT 'ä¸€èˆ¬',   -- ğŸ†• è¿½åŠ 
    release_flag BOOLEAN NOT NULL DEFAULT FALSE,
    update_date TIMESTAMP WITHOUT TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT check_news_category CHECK (category IN ('é‡è¦', 'ã‚·ã‚¹ãƒ†ãƒ ', 'ä¸€èˆ¬'))  -- ğŸ†• è¿½åŠ 
);

-- Indexes
CREATE INDEX idx_news_date ON news(news_date DESC);
CREATE INDEX idx_news_release_date ON news(release_flag, news_date DESC);
CREATE INDEX idx_news_published ON news(news_date DESC) WHERE release_flag = TRUE;
CREATE INDEX idx_news_category ON news(category);   -- ğŸ†• è¿½åŠ 
```

#### 1.2 `src/main/resources/02_data.sql` æ›´æ–°
```sql
INSERT INTO news (news_date, title, content, category, release_flag) VALUES
('2025-10-15', 'å‹¤æ€ ç· ã‚æ—¥ã®ãŠçŸ¥ã‚‰ã›', 'ä»Šæœˆã®å‹¤æ€ ç· ã‚æ—¥ã¯æœˆæœ«ã§ã™ã€‚æœŸæ—¥ã¾ã§ã«å¿…ãšå‹¤æ€ è¨˜éŒ²ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚', 'é‡è¦', true),
('2025-10-14', 'ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®ãŠçŸ¥ã‚‰ã›', '10æœˆ20æ—¥ï¼ˆæ—¥ï¼‰2:00-5:00ã«ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’å®Ÿæ–½ã—ã¾ã™ã€‚', 'ã‚·ã‚¹ãƒ†ãƒ ', true),
('2025-10-13', 'ä¼‘æ†©æ™‚é–“è¨˜éŒ²æ©Ÿèƒ½ã®è¿½åŠ ', 'ä¼‘æ†©é–‹å§‹ãƒ»çµ‚äº†ãƒœã‚¿ãƒ³ã‚’ä½¿ã†ã¨ã€ã‚ˆã‚Šæ­£ç¢ºãªå‹¤æ€ è¨˜éŒ²ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚', 'ä¸€èˆ¬', true),
('2025-10-12', 'ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ãŠé¡˜ã„', 'å®šæœŸçš„ã«è¨­å®šç”»é¢ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚', 'ä¸€èˆ¬', false);
```

---

### Phase 2: Backend Layer Update (2-3æ™‚é–“)

#### 2.1 Entity: `src/main/java/com/example/teamdev/entity/News.java`
```java
@NotBlank
@Size(max = 200)
private String title;  // ğŸ†• è¿½åŠ 

@NotBlank
@Pattern(regexp = "^(é‡è¦|ã‚·ã‚¹ãƒ†ãƒ |ä¸€èˆ¬)$")
private String category;  // ğŸ†• è¿½åŠ 
```

#### 2.2 DTO: `src/main/java/com/example/teamdev/dto/api/news/NewsResponse.java`
```java
@Schema(description = "ã‚¿ã‚¤ãƒˆãƒ«", example = "å‹¤æ€ ç· ã‚æ—¥ã®ãŠçŸ¥ã‚‰ã›")
String title,  // ğŸ†• è¿½åŠ 

@Schema(description = "ã‚«ãƒ†ã‚´ãƒª", example = "é‡è¦")
String category,  // ğŸ†• è¿½åŠ 
```

#### 2.3 DTO: `NewsCreateRequest.java` / `NewsUpdateRequest.java`
```java
@Schema(description = "ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆæœ€å¤§200æ–‡å­—ï¼‰", example = "å‹¤æ€ ç· ã‚æ—¥ã®ãŠçŸ¥ã‚‰ã›")
@NotBlank
@Size(min = 1, max = 200)
String title,  // ğŸ†• è¿½åŠ 

@Schema(description = "ã‚«ãƒ†ã‚´ãƒªï¼ˆé‡è¦/ã‚·ã‚¹ãƒ†ãƒ /ä¸€èˆ¬ï¼‰", example = "é‡è¦")
@NotBlank
@Pattern(regexp = "^(é‡è¦|ã‚·ã‚¹ãƒ†ãƒ |ä¸€èˆ¬)$")
String category  // ğŸ†• è¿½åŠ 
```

#### 2.4 Mapper: `src/main/resources/com/example/teamdev/mapper/NewsMapper.xml`
```xml
<!-- INSERTæ–‡ -->
<insert id="save" ...>
    INSERT INTO news (
        news_date,
        title,      <!-- ğŸ†• è¿½åŠ  -->
        content,
        category,   <!-- ğŸ†• è¿½åŠ  -->
        release_flag,
        update_date
    ) VALUES (
        #{newsDate},
        #{title},      <!-- ğŸ†• è¿½åŠ  -->
        #{content},
        #{category},   <!-- ğŸ†• è¿½åŠ  -->
        #{releaseFlag},
        #{updateDate}
    )
</insert>

<!-- UPDATEæ–‡ -->
<update id="upDate" ...>
    UPDATE news
    SET
        news_date = #{newsDate},
        title = #{title},          <!-- ğŸ†• è¿½åŠ  -->
        content = #{content},
        category = #{category},    <!-- ğŸ†• è¿½åŠ  -->
        release_flag = #{releaseFlag},
        update_date = #{updateDate}
    WHERE id = #{id}
</update>
```

#### 2.5 Service: `NewsManageRegistrationService.java` ç­‰
- Entityç”Ÿæˆæ™‚ã« `title`, `category` ã‚’è¨­å®š
- ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰å€¤ã‚’å–å¾—ã—ã¦è¨­å®š

---

### Phase 3: Frontend Layer Update (2-3æ™‚é–“)

#### 3.1 OpenAPIå‹ç”Ÿæˆ
```bash
npm run generate:api
# NewsResponse, NewsCreateRequestç­‰ãŒè‡ªå‹•æ›´æ–°ã•ã‚Œã‚‹
```

#### 3.2 ãƒ•ã‚©ãƒ¼ãƒ : `frontend/src/features/news/components/NewsFormModal.tsx`

**Zodã‚¹ã‚­ãƒ¼ãƒæ‹¡å¼µ:**
```typescript
const newsFormSchema = z.object({
  newsDate: z.string()...,
  title: z.string()  // ğŸ†• è¿½åŠ 
    .min(1, { message: "ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆã§ã™" })
    .max(200, { message: "ã‚¿ã‚¤ãƒˆãƒ«ã¯200æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„" }),
  content: z.string()...,
  category: z.enum(["é‡è¦", "ã‚·ã‚¹ãƒ†ãƒ ", "ä¸€èˆ¬"], {  // ğŸ†• è¿½åŠ 
    required_error: "ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„"
  })
});
```

**ãƒ•ã‚©ãƒ¼ãƒ UIè¿½åŠ :**
```tsx
{/* ã‚¿ã‚¤ãƒˆãƒ«å…¥åŠ› */}
<div className="space-y-2">
  <Label htmlFor="title">ã‚¿ã‚¤ãƒˆãƒ«</Label>
  <Input
    id="title"
    placeholder="ãŠçŸ¥ã‚‰ã›ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    {...form.register("title")}
  />
  {errors.title && <p className="text-destructive text-sm">{errors.title.message}</p>}
</div>

{/* ã‚«ãƒ†ã‚´ãƒªé¸æŠ */}
<div className="space-y-2">
  <Label htmlFor="category">ã‚«ãƒ†ã‚´ãƒª</Label>
  <Select
    value={form.watch("category")}
    onValueChange={(value) => form.setValue("category", value)}
  >
    <SelectTrigger>
      <SelectValue placeholder="ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ" />
    </SelectTrigger>
    <SelectContent>
      <SelectItem value="é‡è¦">é‡è¦</SelectItem>
      <SelectItem value="ã‚·ã‚¹ãƒ†ãƒ ">ã‚·ã‚¹ãƒ†ãƒ </SelectItem>
      <SelectItem value="ä¸€èˆ¬">ä¸€èˆ¬</SelectItem>
    </SelectContent>
  </Select>
</div>
```

#### 3.3 ãƒ†ãƒ¼ãƒ–ãƒ«: `frontend/src/features/news/hooks/useNewsColumns.tsx`

**titleã‚«ãƒ©ãƒ è¿½åŠ :**
```tsx
{
  accessorKey: "title",
  header: ({ column }) => (
    <DataTableColumnHeader column={column} title="ã‚¿ã‚¤ãƒˆãƒ«" />
  ),
  cell: ({ row }) => (
    <div className="font-medium">{row.getValue("title")}</div>
  ),
},
```

**categoryã‚«ãƒ©ãƒ è¿½åŠ :**
```tsx
{
  accessorKey: "category",
  header: ({ column }) => (
    <DataTableColumnHeader column={column} title="ã‚«ãƒ†ã‚´ãƒª" />
  ),
  cell: ({ row }) => {
    const category = row.getValue("category") as string;
    const variant =
      category === "é‡è¦" ? "destructive" :
      category === "ã‚·ã‚¹ãƒ†ãƒ " ? "default" : "secondary";

    return <Badge variant={variant}>{category}</Badge>;
  },
},
```

**ã‚«ãƒ©ãƒ é †åº:**
```
select â†’ æ—¥ä»˜ â†’ ã‚¿ã‚¤ãƒˆãƒ« â†’ å†…å®¹ â†’ ã‚«ãƒ†ã‚´ãƒª â†’ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ â†’ æœ€çµ‚æ›´æ–° â†’ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
```

#### 3.4 ã‚«ãƒ¼ãƒ‰è¡¨ç¤º: `PublishedNewsGrid.tsx`
```tsx
<CardTitle className="font-semibold text-lg">{news.title}</CardTitle>
<Badge variant={...}>{news.category}</Badge>
<Badge variant={...}>{news.newsDate}</Badge>
<p className="text-muted-foreground text-sm">{news.content}</p>
```

---

### Phase 4: Testing & Validation (1-2æ™‚é–“)

#### 4.1 Backend Testæ›´æ–°
- `NewsRestControllerTest.java`: ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«title/categoryè¿½åŠ 
- `NewsManageRegistrationServiceTest.java`: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆè¿½åŠ 

#### 4.2 Frontend Testæ›´æ–°
- `NewsFormModal.test.tsx`: title/categoryå…¥åŠ›ãƒ†ã‚¹ãƒˆ
- `useNewsColumns.test.tsx`: ã‚«ãƒ©ãƒ è¡¨ç¤ºãƒ†ã‚¹ãƒˆ

#### 4.3 E2E Test
- ãŠçŸ¥ã‚‰ã›ä½œæˆãƒ•ãƒ­ãƒ¼ï¼ˆtitle/categoryå…¥åŠ›ï¼‰
- ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤ºç¢ºèª
- ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

---

## ğŸ“Š ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«ã‚µãƒãƒª

### Backend (12ãƒ•ã‚¡ã‚¤ãƒ«)
```
âœï¸ src/main/resources/01_schema.sql
âœï¸ src/main/resources/02_data.sql
âœï¸ src/main/java/com/example/teamdev/entity/News.java
âœï¸ src/main/java/com/example/teamdev/dto/api/news/NewsResponse.java
âœï¸ src/main/java/com/example/teamdev/dto/api/news/NewsCreateRequest.java
âœï¸ src/main/java/com/example/teamdev/dto/api/news/NewsUpdateRequest.java
âœï¸ src/main/resources/com/example/teamdev/mapper/NewsMapper.xml
âœï¸ src/main/java/com/example/teamdev/service/NewsManageRegistrationService.java
âœï¸ src/test/java/com/.../NewsRestControllerTest.java
âœï¸ src/test/java/com/.../NewsManageRegistrationServiceTest.java
```

### Frontend (6ãƒ•ã‚¡ã‚¤ãƒ«)
```
âœï¸ frontend/src/features/news/components/NewsFormModal.tsx
âœï¸ frontend/src/features/news/hooks/useNewsColumns.tsx
âœï¸ frontend/src/features/news/components/PublishedNewsGrid.tsx
âœï¸ frontend/src/features/news/components/NewsFormModal.test.tsx
âœï¸ frontend/src/features/news/hooks/useNewsColumns.test.tsx
ğŸ”„ frontend/src/types/** (OpenAPIè‡ªå‹•ç”Ÿæˆ)
```

---

## âš™ï¸ å®Ÿè¡Œæ‰‹é †

### 1. DBå†æ§‹ç¯‰
```bash
# Dockerç’°å¢ƒã®å ´åˆ
docker-compose down -v
docker-compose up -d

# ã¾ãŸã¯
npm run db:reset
```

### 2. Backendé–‹ç™º
```bash
# Javaã‚³ãƒ³ãƒ‘ã‚¤ãƒ« & ãƒ†ã‚¹ãƒˆ
./gradlew clean build
./gradlew test
```

### 3. Frontendé–‹ç™º
```bash
# OpenAPIå‹ç”Ÿæˆ
cd frontend
npm run generate:api

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test
```

### 4. å‹•ä½œç¢ºèª
1. ãŠçŸ¥ã‚‰ã›ç®¡ç†ç”»é¢ã‚’é–‹ã
2. ã€Œæ–°è¦ä½œæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. title, category, content, æ—¥ä»˜ã‚’å…¥åŠ›
4. ä¿å­˜å¾Œã€ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã‚«ãƒ¼ãƒ‰ã«æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

---

## âœ… å®Œäº†æ¡ä»¶

- [x] DBã‚¹ã‚­ãƒ¼ãƒã«title/categoryã‚«ãƒ©ãƒ ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹
- [x] ãŠçŸ¥ã‚‰ã›ä½œæˆãƒ•ã‚©ãƒ¼ãƒ ã«title/categoryãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [x] ãƒ†ãƒ¼ãƒ–ãƒ«ã«title/categoryã‚«ãƒ©ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [x] categoryãƒãƒƒã‚¸ãŒæ­£ã—ã„è‰²ã§è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆé‡è¦=èµ¤ã€ã‚·ã‚¹ãƒ†ãƒ =é’ã€ä¸€èˆ¬=ã‚°ãƒ¬ãƒ¼ï¼‰
- [x] æ—¢å­˜ã®title/categoryãªã—ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãç§»è¡Œã•ã‚Œã¦ã„ã‚‹
- [x] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒé©åˆ‡ã«è¡¨ç¤ºã•ã‚Œã‚‹
- [x] å…¨ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹

---

## ğŸš€ æ¨å®šæ‰€è¦æ™‚é–“

**åˆè¨ˆ: 5-8æ™‚é–“**
- Phase 1 (DB Schema): 30åˆ†
- Phase 2 (Backend): 2-3æ™‚é–“
- Phase 3 (Frontend): 2-3æ™‚é–“
- Phase 4 (Testing): 1-2æ™‚é–“

---

## ğŸ“ å‚™è€ƒ

### ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

**ãƒªã‚¹ã‚¯1: æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®titleå“è³ª**
- å½±éŸ¿: contentã®å…ˆé ­50æ–‡å­—ãŒä¸é©åˆ‡ãªtitleã«ãªã‚‹å¯èƒ½æ€§
- å¯¾ç­–: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¾Œã«ç®¡ç†è€…ãŒæ‰‹å‹•ã§ä¸»è¦ãªãŠçŸ¥ã‚‰ã›ã®titleã‚’ç·¨é›†

**ãƒªã‚¹ã‚¯2: categoryã®å°†æ¥çš„ãªæ‹¡å¼µ**
- å½±éŸ¿: CHECKåˆ¶ç´„ã«ã‚ˆã‚Šæ–°ã‚«ãƒ†ã‚´ãƒªè¿½åŠ æ™‚ã«ALTER TABLEãŒå¿…è¦
- å¯¾ç­–: åˆæœŸæ®µéšã§ååˆ†ãªã‚«ãƒ†ã‚´ãƒªã‚’å®šç¾©ã€ã¾ãŸã¯å°†æ¥çš„ã«categoryãƒã‚¹ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«åŒ–ã‚’æ¤œè¨

**ãƒªã‚¹ã‚¯3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¤‡é›‘åŒ–**
- å½±éŸ¿: Zod schemaã®è¤‡é›‘åŒ–ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¢—åŠ 
- å¯¾ç­–: categoryã‚’selectè¦ç´ ã«ã—ã¦UIå´ã§å…¥åŠ›å€¤ã‚’åˆ¶é™

### æœŸå¾…åŠ¹æœ

1. **UIè¦–èªæ€§**: ã‚¿ã‚¤ãƒˆãƒ«è¡¨ç¤ºã«ã‚ˆã‚Šä¸€è¦§æ€§ãŒ50%å‘ä¸Š
2. **é‹ç”¨åŠ¹ç‡**: ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã§æ¤œç´¢æ™‚é–“30%çŸ­ç¸®
3. **ä¿å®ˆæ€§**: æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã«ã‚ˆã‚Šå°†æ¥çš„ãªæ©Ÿèƒ½æ‹¡å¼µãŒå®¹æ˜“
